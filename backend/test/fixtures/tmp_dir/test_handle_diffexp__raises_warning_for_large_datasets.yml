server:
  app:
    verbose: false
    debug: false
    host: localhost
    port: null
    open_browser: false
    force_https: false
    flask_secret_key: secret
    generate_cache_control_headers: false
    server_timing_headers: false
    csp_directives: null
    api_base_url: null
    web_base_url: null
  authentication:
    type: session
    insecure_test_environment: false
    params_oauth:
      oauth_api_base_url: null
      client_id: null
      client_secret: null
      jwt_decode_options: null
      session_cookie:  true
      cookie:  null

  multi_dataset:
    dataroot: /Users/mdunitz/Desktop/cellxgene/cellxgene/backend/test/fixtures
    index: false
    allowed_matrix_types: []
    matrix_cache:
      max_datasets: 5
      timelimit_s: 5

  single_dataset:
    datapath: null
    obs_names: null
    var_names: null
    about: null
    title: null

  diffexp:
    alg_cxg: # number of threads to use is computed from: min(max_workers, cpu_multipler * cpu_count)
      max_workers: 64
      cpu_multiplier: 4
      target_workunit: 16_000_000  # The target number of matrix elements that are evaluated in one thread.

  data_locator:
    s3:
      region_name: us-east-1
    api_base: null

  adaptor:
    cxg_adaptor:
      tiledb_ctx:
        sm.tile_cache_size:  8589934592
        sm.num_reader_threads:  32

    anndata_adaptor:
      backed: false

  limits:
    column_request_max: 32
    diffexp_cellcount_max: null

dataset:
  app:
    scripts: [] #list of strs (filenames) or dicts containing keys
    inline_scripts: [] #list of strs (filenames)

    about_legal_tos: null
    about_legal_privacy: null

    authentication_enable: true

  presentation:
    max_categories: 1000
    custom_colors: true

  user_annotations:
    enable: true
    type: local_file_csv
    hosted_tiledb_array:
      db_uri: null
      hosted_file_directory: null
    local_file_csv:
      directory: null
      file: null
    ontology:
      enable: false
      obo_location: null

  embeddings:
    names: []
    enable_reembedding: false

  diffexp:
    enable: true
    lfc_cutoff: 0.02
    top_n: 15
external:
  aws_secrets_manager:
    region: null
    secrets: []
  environment:
  - name: CXG_SECRET_KEY
    path:
    - server
    - app
    - flask_secret_key
    required: false
  - name: CXG_OAUTH_CLIENT_SECRET
    path:
    - server
    - authentication
    - params_oauth
    - client_secret
    required: false
